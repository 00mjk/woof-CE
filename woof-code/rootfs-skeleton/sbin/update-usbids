#!/bin/sh
# update-usbids for puppy linux

URL="http://www.linux-usb.org/usb.ids"
URL=${URL}.bz2
FILE=${URL##*/}

mkdir -p /usr/share/hwdata
mkdir -p /usr/share/misc
mkdir -p /var/lib/usbutils

wget --no-check-certificate -O /usr/share/hwdata/${FILE} $URL || exit

find /usr/share -name 'usb.ids' -delete
find /var/lib -name 'usb.ids' -delete

bunzip2 /usr/share/hwdata/${FILE} || exit

ln -sf ../../../usr/share/hwdata/usb.ids /usr/share/misc/usb.ids
ln -sf ../../usr/share/hwdata/usb.ids /usr/share/usb.ids
ln -sf ../../../usr/share/hwdata/usb.ids /var/lib/usbutils/usb.ids

grep -o 'Version: .*' /usr/share/misc/usb.ids
echo "Done."

### END ###
