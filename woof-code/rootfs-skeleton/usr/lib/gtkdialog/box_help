#!/bin/bash
#
#This box shows text in /tmp/box_help
#markup/span is valid
#
#usage :
# box_help HEADING URL
#
# HEADING is a short description. Maybe the app-name of the sender.
# URL is a link to a html-page (local or web), or a clean text file.
# 
#Sigmund Berglund, dec 2013
#GPL


if [ "$2" ]; then
	XML_URL='
	<vbox space-expand="false" space-fill="false">
	<hbox border-width="10" space-expand="true" space-fill="true">
	  <text space-expand="true" space-fill="true"><label>""</label></text>
	  <eventbox space-expand="false" space-fill="false">
	    <text use-markup="true" space-expand="false" space-fill="false">
	      <variable>URL</variable>
	      <label>"<b><u><span color='"'#004BDD'"'>'$(gettext 'Further reading')'</span></u></b>"</label>
	    </text>
	    <action signal="enter-notify-event">disable:URL</action>
	    <action signal="leave-notify-event">enable:URL</action>
	   <action signal="button-release-event">defaulthtmlviewer '$2'</action>
	  </eventbox>
	</hbox>
	</vbox>'
fi

export Help='
<window title="Puppy Help" icon-name="gtk-help" default-height="500" default-width="500">
<vbox space-expand="true" space-fill="true">
  '"`/usr/lib/gtkdialog/xml_info fixed help.svg 60 "<b>Puppy Help</b>" "$1"`"'
  '$XML_URL'
  <vbox space-expand="true" space-fill="true">
    <vbox scrollable="true" shadow-type="3" space-expand="true" space-fill="true">
      <text xpad="10" ypad="15" use-markup="true"><input file>/tmp/box_help</input></text>
    </vbox>
  </vbox>
  <hbox space-expand="false" space-fill="false">
    <button>
      '"`/usr/lib/gtkdialog/xml_button-icon ok`"'
      <label>'$(gettext 'Ok')'</label>
    </button>
  </hbox>
</vbox>
</window>'

. /usr/lib/gtkdialog/xml_info gtk
gtkdialog --center -p Help
